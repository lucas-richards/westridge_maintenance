{% extends "workorder/tabs_nav.html" %}
{% load crispy_forms_tags %}
{% block content %}

{% if user.is_authenticated %}

    
    <div>
        <h2>{{ record.workorder.asset.name }}</h2>
        <h4 class="ml-2">Work Order: {{ record.workorder.title }}</h4>
    </div>
    <div class="ml-4">
        <h4>Items Flag (Pass/Fail/Flag)</h4>
        <ul class="mb-4" id="items-flag-list">
            {% if items_flag %}
            {% for item in items_flag %}
                <li>{{ item.title }}</li>
            {% endfor %}
            {% else %}
            <p>No records found</p>
            {% endif %}
        </ul>
    
        <h4>Items Boolean (Checkbox)</h4>
        <ul class="mb-4" id="items-boolean-list">
            {% if items_boolean %}
            {% for item in items_boolean %}
            <li>{{ item.title }}</li>
            {% endfor %}
            {% else %}
            <p>No records found</p>
            {% endif %}
        </ul>
    </div>
    <div>
        <button type="button" onclick="addItem('flag')">Add Flag Item</button>
        <button type="button" onclick="addItem('boolean')">Add Boolean Item</button>
    </div>

    <script>
        function addItem(type) {
            const itemTitle = prompt('Enter item title:');
            if (itemTitle) {
                const listId = type === 'flag' ? 'items-flag-list' : 'items-boolean-list';
                const list = document.getElementById(listId);
                const noRecords = list.querySelector('p');
                if (noRecords) {
                    noRecords.remove();
                }
                const listItem = document.createElement('li');
                listItem.textContent = itemTitle;
                list.appendChild(listItem);
            }
        }
    </script>


{% endif %}

{% endblock content %}
