{% extends "workorder/tabs_nav.html" %}
{% load crispy_forms_tags %}
{% block content %}

{% if user.is_authenticated %}

    
    <div>
        <h2>{{ record.workorder.asset.name }}</h2>
        <h4 class="ml-2">Work Order: {{ record.workorder.title }}</h4>
    </div>
    <div class="ml-4">
        <h4>Items Flag (Pass/Fail/Flag)</h4>
        <ul class="mb-4" id="items-flag-list">
            {% if items_flag %}
            {% for item in items_flag %}
                <li>
                    <div style="display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between;">
                        <div style="flex: 1; margin-right: 10px;">{{ item.title }}</div>
                        <div style="flex: 1;">
                            <select class="form-control" style="width: 25%;">
                                <option>Select</option>
                                <option>Pass</option>
                                <option>Fail</option>
                                <option>Flag</option>
                            </select>
                        </div>
                    </div>
                </li>
            {% endfor %}
            {% else %}
            <p>No records found</p>
            {% endif %}
        </ul>
    
        <h4>Items Boolean (Checkbox)</h4>
        <ul class="mb-4" id="items-boolean-list">
            {% if items_boolean %}
            {% for item in items_boolean %}
            <li>
                <div class="row align-items-center">
                    <div class="col">{{ item.title }}</div>
                    <div class="col">
                        <input type="checkbox" style="transform: scale(1.5);">
                    </div>
                </div>
            </li>
            {% endfor %}
            {% else %}
            <p>No records found</p>
            {% endif %}
        </ul>
    </div>
    <div>
        <button type="button" onclick="addItem('flag')">Add Flag Item</button>
        <button type="button" onclick="addItem('boolean')">Add Boolean Item</button>
    </div>

    <script>
        function addItem(type) {
            const itemTitle = prompt('Enter item title:');
            if (itemTitle) {
                const listId = type === 'flag' ? 'items-flag-list' : 'items-boolean-list';
                const list = document.getElementById(listId);
                const noRecords = list.querySelector('p');
                if (noRecords) {
                    noRecords.remove();
                }
                const listItem = document.createElement('li');
                if (type === 'flag') {
                    listItem.innerHTML = `
                        <div style="display: flex; flex-direction: row; align-items: flex-start; justify-content: space-between;">
                            <div style="flex: 1; margin-right: 10px;">${itemTitle}</div>
                            <div style="flex: 1;">
                                <select class="form-control" style="width: 25%;">
                                    <option>Select</option>
                                    <option>Pass</option>
                                    <option>Fail</option>
                                    <option>Flag</option>
                                </select>
                            </div>
                        </div>
                    `;
                } else {
                    listItem.innerHTML = `
                        <div class="row align-items-center">
                            <div class="col">${itemTitle}</div>
                            <div class="col">
                                <input type="checkbox" style="transform: scale(1.5);">
                            </div>
                        </div>
                    `;
                }
                list.appendChild(listItem);
            }
        }
    </script>


{% endif %}

{% endblock content %}
